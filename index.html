<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simplism簡單保養-新客限定轉盤抽獎</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif; }

@keyframes float { 0%,100%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-20px) rotate(180deg);} }
.animate-float { animation: float 6s ease-in-out infinite; }

@keyframes rotate-lights { from{transform:rotate(0deg);} to{transform:rotate(360deg);} }
.animate-rotate-lights { animation: rotate-lights 3s linear infinite; }

@keyframes slideUp { from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
.animate-slide-up { animation: slideUp 0.6s ease; }
</style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-100 min-h-screen flex justify-center relative overflow-auto py-24 sm:py-32">

<!-- 浮動光點背景 -->
<div class="fixed top-0 left-0 w-full h-full pointer-events-none z-0">
  <div class="absolute w-20 h-20 bg-gradient-to-r from-blue-300 to-blue-400 rounded-full opacity-10 animate-float top-[10%] left-[10%]"></div>
  <div class="absolute w-16 h-16 bg-gradient-to-r from-sky-300 to-cyan-300 rounded-full opacity-10 animate-float top-[20%] right-[15%]"></div>
  <div class="absolute w-24 h-24 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full opacity-10 animate-float bottom-[15%] left-[20%]"></div>
</div>

<div class="w-full max-w-xl bg-white/95 rounded-3xl shadow-2xl shadow-blue-200 p-6 sm:p-10 text-center relative z-10 backdrop-blur-sm border-2 border-blue-200/30 flex flex-col items-center overflow-auto">
  <h1 class="text-3xl sm:text-4xl font-extrabold bg-gradient-to-r from-slate-600 to-slate-800 bg-clip-text text-transparent mb-2 tracking-wide">
    Simplism簡單保養
  </h1>
  <p class="inline-block text-lg md:text-xl text-slate-600 mt-4 mb-12 font-semibold bg-[#ECF5FC] px-8 py-2 rounded-full shadow-md">
    新客限定｜轉出你的專屬優惠
  </p>

  <div class="relative w-72 h-72 sm:w-80 sm:h-80 mx-auto mb-6">
    <!-- 旋轉光圈 -->
    <div class="absolute inset-0 animate-rotate-lights rounded-full" style="background:conic-gradient(#A9CCE3 0deg 30deg, transparent 30deg 60deg, #EAF2F8 60deg 90deg, transparent 90deg 120deg, #A9CCE3 120deg 150deg, transparent 150deg 180deg, #EAF2F8 180deg 210deg, transparent 210deg 240deg, #A9CCE3 240deg 270deg, transparent 270deg 300deg, #EAF2F8 300deg 330deg, transparent 330deg 360deg); opacity:0.6;"></div>

    <!-- 指針 -->
    <div class="absolute w-0 h-0 top-[-20px] left-1/2 -translate-x-1/2 border-l-[20px] border-r-[20px] border-t-[35px] border-l-transparent border-r-transparent border-t-slate-400 z-20 drop-shadow-lg">
      <div class="absolute w-0 h-0 top-[-33px] left-[-16px] border-l-[16px] border-r-[16px] border-t-[28px] border-l-transparent border-r-transparent border-t-slate-500"></div>
    </div>

    <!-- 轉盤 -->
    <div id="wheelContainer" class="absolute top-2 left-2 w-[calc(100%-16px)] h-[calc(100%-16px)] rounded-full bg-gradient-to-b from-slate-300 to-slate-400 p-1.5 shadow-lg shadow-slate-500/30">
      <div id="wheel" class="w-full h-full rounded-full relative overflow-hidden transition-transform duration-[4000ms] ease-[cubic-bezier(0.23,1,0.32,1)]"></div>

      <!-- 抽獎按鈕 -->
      <button id="spinButton" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-gradient-to-br from-slate-500 to-slate-700 rounded-full flex items-center justify-center text-sm font-extrabold text-white shadow-lg border-4 border-slate-300 cursor-pointer transition-all duration-300 hover:scale-105">
        立即抽獎
      </button>
    </div>
  </div>

  <!-- 「馬上領取新客專屬好康！」按鈕 -->
  <button id="specialButton" class="w-full max-w-xs bg-gradient-to-r from-slate-600 to-slate-800 text-white font-bold text-xl py-4 px-8 rounded-full shadow-lg shadow-slate-500/40 transition-all duration-300 hover:-translate-y-1 mt-4">
    馬上領取新客專屬好康！
  </button>

  <div id="resultContainer" class="w-full"></div>

  <!-- 活動規則 -->
  <div class="mt-12 p-6 bg-blue-50/60 rounded-lg text-sm text-slate-700 leading-relaxed border border-blue-200 w-full">
    <strong class="block mb-1 text-base font-bold">活動規則：</strong>
    <ul class="list-disc list-inside text-left">
      <li>每位新客戶限抽獎一次，單筆不限金額皆可使用。</li>
      <li>活動字串有效期限至 2025年10月23日 (四) 23:59為止。</li>
      <li>活動字串優惠僅限於Simplism簡單保養官網登入會員使用。</li>
      <li>使用時須於結帳頁面『活動字串』欄位輸入享優惠好禮，逾期無效。</li>
      <li>角質調理露20ml數量有限，贈完為止。</li>
      <li>本活動辦法最終解釋權歸Simplism簡單保養所有。</li>
    </ul>
  </div>
</div>

<script>
// 抽獎資料
const PRIZES = [
  { name: '現折<br>30元', code: 'NEW30T', probability: 15, sectionIndex: 0, gradient: 'linear-gradient(135deg, #D3E5F2 0%, #A4C9E8 100%)' },
  { name: '現折<br>50元', code: 'NEW50F', probability: 25, sectionIndex: 1, gradient: 'linear-gradient(135deg, #B9D7EA 0%, #769FCD 100%)' },
  { name: '現折<br>80元', code: 'NEW80E', probability: 30, sectionIndex: 2, gradient: 'linear-gradient(135deg, #A4C9E8 0%, #6892C3 100%)' },
  { name: '現折<br>100元', code: 'NEW100H', probability: 20, sectionIndex: 3, gradient: 'linear-gradient(135deg, #B9D7EA 0%, #769FCD 100%)' },
  { name: '角質調理露<br>20ml', code: 'NEW20AC', probability: 10, sectionIndex: 4, gradient: 'linear-gradient(135deg, #D3E5F2 0%, #A4C9E8 100%)' }
];

let rotation = 0;
let isSpinning = false;
let spunPrize = localStorage.getItem('simplism_lottery_result') ? JSON.parse(localStorage.getItem('simplism_lottery_result')) : null;

// render轉盤
function renderWheel() {
  const wheel = document.getElementById('wheel');
  wheel.innerHTML = '';
  PRIZES.forEach((prize,index)=>{
    const section = document.createElement('div');
    section.className='absolute w-1/2 h-1/2 origin-bottom-right flex items-center justify-center font-bold text-xs sm:text-sm text-white text-shadow p-4 box-border border-r-2 border-b-2 border-white/40';
    section.style.transform=`rotate(${index*72}deg)`;
    section.style.background=prize.gradient;
    section.innerHTML=`<div style="transform:rotate(-45deg); text-align:center; line-height:1.2;">${prize.name}</div>`;
    wheel.appendChild(section);
  });
  wheel.style.transform=`rotate(${rotation}deg)`;
}
renderWheel();

// 抽獎
function getRandomPrize(){
  const random=Math.random()*100;
  let cumulative=0;
  for(const prize of PRIZES){
    cumulative+=prize.probability;
    if(random<=cumulative) return prize;
  }
  return PRIZES[0];
}

function spinWheel(){
  if(isSpinning||spunPrize) return;
  isSpinning=true;

  const spinBtn = document.getElementById('spinButton');
  const specialBtn = document.getElementById('specialButton');

  // 按鈕顯示抽獎中
  spinBtn.innerText='抽獎中...';
  specialBtn.innerText='抽獎中...';

  const selected = getRandomPrize();
  const sectionAngle = 72;
  const baseVisualAngle = 225;
  const targetAngle = (270-(baseVisualAngle+selected.sectionIndex*sectionAngle)+360)%360;
  const baseRotation = 2160;
  const jitter = Math.random()*10-5;
  rotation = baseRotation + targetAngle + jitter;
  renderWheel();

  setTimeout(()=>{
    spunPrize = selected;
    localStorage.setItem('simplism_lottery_result', JSON.stringify(selected));
    showResult();
    spinBtn.innerText='您已抽過獎';
    isSpinning=false;
  },4000);
}

// 顯示抽獎結果
function showResult(){
  const container=document.getElementById('resultContainer');
  if(!spunPrize) return;
  container.innerHTML=`
    <div class="mt-16 mb-16 p-6 bg-[#6380A6] rounded-2xl text-white shadow-lg shadow-blue-500/40 border-2 border-white/50 animate-slide-up max-w-xl mx-auto">
      <h2 class="text-xl font-bold mb-3">恭喜獲得 ${spunPrize.name.replace('<br>','')}！</h2>
      <div class="relative">
        <div id="copyCode" class="text-2xl font-black bg-white/25 py-3 px-6 rounded-lg my-3 tracking-widest cursor-pointer transition-all duration-300 hover:bg-white/40 hover:scale-105 border-2 border-white/50">
          ${spunPrize.code}
        </div>
      </div>
      <p class="text-xs opacity-90">點擊文字框即可複製(截圖保存以免忘記！)</p>
      <p class="text-sm mt-1 mb-4">請至結帳頁面『活動字串』貼上使用</p>
      <a href="https://www.simplism.com.tw/products/product/" target="_blank" rel="noopener noreferrer" class="inline-block bg-gradient-to-r from-sky-400 to-blue-500 text-white font-bold py-3 px-8 rounded-full shadow-md transition-transform hover:scale-105 hover:-translate-y-0.5">
        立即前往購物
      </a>
    </div>
  `;
  document.getElementById('copyCode').onclick=()=>{navigator.clipboard.writeText(spunPrize.code).then(()=>alert('已複製！'));};

  // 抽完後隱藏「馬上領取新客專屬好康！」按鈕
  document.getElementById('specialButton').style.display = 'none';
}

// 綁定按鈕
document.getElementById('spinButton').onclick = spinWheel;
document.getElementById('specialButton').onclick = spinWheel;

// 如果已經抽過則顯示結果
if(spunPrize) showResult();
</script>

</body>
</html>

